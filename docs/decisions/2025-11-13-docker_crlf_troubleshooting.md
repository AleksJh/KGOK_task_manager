# –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ü—Ä–æ–±–ª–µ–º—ã –ó–∞–ø—É—Å–∫–∞ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: CRLF –∏ Runtime-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ê–≤—Ç–æ—Ä:** Aleksan Jhangiryan  
**–î–∞—Ç–∞:** 2025-11-13
**–ü—Ä–æ–±–ª–µ–º–∞:** `exec /app/entrypoint.sh: no such file or directory`  
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞–ª—Å—è –Ω–∞ –æ–¥–Ω–æ–º –ü–ö, –Ω–æ –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–æ–π –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Git

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –†–µ–∑—é–º–µ

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `web` –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è –∏–∑-–∑–∞ –¥–≤—É—Ö –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:

1. **CRLF Line Endings**: –°–∫—Ä–∏–ø—Ç `entrypoint.sh` –±—ã–ª –∑–∞–∫–æ–º–º–∏—á–µ–Ω —Å Windows-–æ–∫–æ–Ω—á–∞–Ω–∏—è–º–∏ —Å—Ç—Ä–æ–∫ (CRLF), —á—Ç–æ –¥–µ–ª–∞–ª–æ –µ–≥–æ –Ω–µ–≤—ã–ø–æ–ª–Ω–∏–º—ã–º –≤ Linux-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
2. **–ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è Runtime-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `collectstatic` –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞ (build-time), —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:** –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è line endings —á–µ—Ä–µ–∑ `sed` –≤ Dockerfile –∏ –ø–µ—Ä–µ–Ω–æ—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (`collectstatic`, –º–∏–≥—Ä–∞—Ü–∏–∏) –Ω–∞ runtime —Å —è–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

---

## üîç –ì–ª—É–±–æ–∫–∏–π –ê–Ω–∞–ª–∏–∑ –ü—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ #1: CRLF Line Endings

#### –°—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

**–ß—Ç–æ —Ç–∞–∫–æ–µ CRLF?**
- **CRLF** (Carriage Return + Line Feed, `\r\n`) ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç—Ä–æ–∫ –≤ Windows
- **LF** (Line Feed, `\n`) ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç—Ä–æ–∫ –≤ Linux/Unix/MacOS

**–ü–æ—á–µ–º—É —ç—Ç–æ –ª–æ–º–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã?**

–ö–æ–≥–¥–∞ Linux-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä (`/bin/sh`) –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç —Å CRLF:

```bash
#!/bin/sh\r\n
echo "Hello"\r\n
```

Linux-–æ–±–æ–ª–æ—á–∫–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç `\r` (–≤–æ–∑–≤—Ä–∞—Ç –∫–∞—Ä–µ—Ç–∫–∏) –∫–∞–∫ —á–∞—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–∞–º:
- `exec format error` ‚Äî —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç—Å—è –∫–∞–∫ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π
- `/bin/sh^M: bad interpreter` ‚Äî shell –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä `/bin/sh\r`
- `exec /app/entrypoint.sh: no such file or directory` ‚Äî –≤–∞—à —Å–ª—É—á–∞–π

#### –ü–æ—á–µ–º—É –ø—Ä–æ–±–ª–µ–º–∞ –≤–æ–∑–Ω–∏–∫–ª–∞ –Ω–∞ –≤—Ç–æ—Ä–æ–º –ü–ö?

**–†–∞–∑–ª–∏—á–∏—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Git:**

| –ü–ö #1 (—Ä–∞–±–æ—Ç–∞–ª–æ)                          | –ü–ö #2 (–Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ)                      |
|-------------------------------------------|------------------------------------------|
| Git –Ω–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–ª –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ç—Ä–æ–∫      | Git –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–ª LF‚ÜíCRLF  |
| –§–∞–π–ª –∑–∞–∫–æ–º–º–∏—á–µ–Ω —Å LF                      | –§–∞–π–ª –∑–∞–∫–æ–º–º–∏—á–µ–Ω —Å CRLF                   |
| Linux-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—ã–ø–æ–ª–Ω–∏–ª —Å–∫—Ä–∏–ø—Ç —É—Å–ø–µ—à–Ω–æ   | Linux-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ —Å–º–æ–≥ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç |

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Git, –≤–ª–∏—è—é—â–∞—è –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
```bash
# Windows –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–∂–µ—Ç –∏–º–µ—Ç—å
git config core.autocrlf true  # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç LF‚ÜíCRLF –ø—Ä–∏ checkout
```

### –ü—Ä–æ–±–ª–µ–º–∞ #2: collectstatic –Ω–∞ Build-time

#### –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ Dockerfile

**–ò—Å—Ö–æ–¥–Ω—ã–π (–ø—Ä–æ–±–ª–µ–º–Ω—ã–π) –ø–æ–¥—Ö–æ–¥:**
```dockerfile
# –í –∫–æ–Ω—Ü–µ Dockerfile
RUN python manage.py collectstatic --noinput
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø–ª–æ—Ö–æ?**

1. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤:**
   - –ï—Å–ª–∏ —Å—Ç–∞—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (S3, MinIO), —Ç—Ä–µ–±—É—é—Ç—Å—è –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞
   - –°–µ–∫—Ä–µ—Ç—ã, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏, **–Ω–∞–≤–µ—á–Ω–æ –∑–∞–ø–µ–∫–∞—é—Ç—Å—è** –≤ —Å–ª–æ–µ –æ–±—Ä–∞–∑–∞ ‚Üí —É—è–∑–≤–∏–º–æ—Å—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

2. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
   - –í —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö `collectstatic` –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ë–î –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ CDN
   - –í–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ ‚Üí —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–≤–∞–ª–∏—Ç—Å—è

3. **–ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**
   - **Build-time** –¥–æ–ª–∂–µ–Ω –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π –∫–æ–¥–∞
   - **Runtime** –¥–æ–ª–∂–µ–Ω –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

#### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥: Runtime-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

–ü–µ—Ä–µ–Ω–æ—Å –ª–æ–≥–∏–∫–∏ –≤ `entrypoint.sh` —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# –í entrypoint.sh
if [ "$COLLECTSTATIC_ON_START" = "true" ]; then
    python manage.py collectstatic --noinput
fi
```

---

## ‚öôÔ∏è –†–µ—à–µ–Ω–∏–µ

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ #1: –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è Line Endings –≤ Dockerfile

**–§–∞–π–ª:** `docker/web/Dockerfile`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```dockerfile
# –î–æ (—Å—Ç—Ä–æ–∫–∞ ~25)
COPY docker/web/entrypoint.sh /app/entrypoint.sh
RUN chmod +x /app/entrypoint.sh

# –ü–æ—Å–ª–µ
COPY docker/web/entrypoint.sh /app/entrypoint.sh
RUN sed -i 's/\r$//' /app/entrypoint.sh && chmod +x /app/entrypoint.sh
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- `sed -i 's/\r$//' /app/entrypoint.sh` ‚Äî —É–¥–∞–ª—è–µ—Ç —Å–∏–º–≤–æ–ª `\r` (–≤–æ–∑–≤—Ä–∞—Ç –∫–∞—Ä–µ—Ç–∫–∏) –≤ –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–æ—Ç–≤–µ—Ä–≥–Ω—É—Ç–∞):** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `dos2unix` (—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞, —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞)
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ `sed`:** –í—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω, –ª–µ–≥–∫–æ–≤–µ—Å–µ–Ω, –Ω–µ —Ä–∞–∑–¥—É–≤–∞–µ—Ç –æ–±—Ä–∞–∑

**–£–¥–∞–ª–µ–Ω–∏–µ collectstatic –∏–∑ Dockerfile:**
```dockerfile
# –£–¥–∞–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ ~31-33
# RUN python manage.py collectstatic --noinput
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ #2: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Runtime-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ docker-compose.yml

**–§–∞–π–ª:** `docker-compose.yml`

**–°–µ—Ä–≤–∏—Å `web` (—Å—Ç—Ä–æ–∫–∏ 13-22):**
```yaml
services:
  web:
    environment:
      - MIGRATE_ON_START=true           # –°—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ
      - COLLECTSTATIC_ON_START=true     # ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
      - POSTGRES_HOST=db                # ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
```

**–°–µ—Ä–≤–∏—Å `worker` (—Å—Ç—Ä–æ–∫–∏ 50-58):**
```yaml
  worker:
    environment:
      - MIGRATE_ON_START=false          # –°—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ
      - POSTGRES_HOST=db                # ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è                 | web      | worker   | –û–±—ä—è—Å–Ω–µ–Ω–∏–µ                                                                                                             |
|----------------------------|----------|----------|------------------------------------------------------------------------------------------------------------------------|
| `MIGRATE_ON_START`         | `true`   | `false`  | –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ race conditions                                              |
| `COLLECTSTATIC_ON_START`   | `true`   | N/A      | –°–±–æ—Ä —Å—Ç–∞—Ç–∏–∫–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è web-—Å–µ—Ä–≤–µ—Ä–∞                                                                          |
| `POSTGRES_HOST`            | `db`     | `db`     | –ò–º—è —Å–µ—Ä–≤–∏—Å–∞ –ë–î –≤ Docker Compose —Å–µ—Ç–∏. –ë–µ–∑ —ç—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—ã—Ç–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ `localhost` (–Ω–µ–≤–µ—Ä–Ω—ã–π —Ö–æ—Å—Ç –≤ Docker) |

---

## ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ü—Ä–æ–≤–µ—Ä–∫–∞

### –ü—Ä–æ—Ü–µ—Å—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
docker compose config

# 2. –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ web —Å —Ñ–∏–∫—Å–∞–º–∏
docker compose build web

# 3. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
docker compose up -d db broker

# 4. –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker compose up -d web

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è entrypoint
docker compose logs -n 50 web
```


## üõ°Ô∏è –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ –†–µ—à–µ–Ω–∏–µ: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ CRLF

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ .gitattributes

**–ü—Ä–æ–±–ª–µ–º–∞:** –§–∏–∫—Å —á–µ—Ä–µ–∑ `sed` –≤ Dockerfile ‚Äî —ç—Ç–æ —Å–∏–º–ø—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ. –û–Ω–æ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –Ω–æ –Ω–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ø–∞–¥–∞–Ω–∏–µ CRLF –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.gitattributes` –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

```gitattributes
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º LF –¥–ª—è –≤—Å–µ—Ö shell-—Å–∫—Ä–∏–ø—Ç–æ–≤
*.sh text eol=lf

# –î—Ä—É–≥–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
*.py text eol=lf
*.yml text eol=lf
*.yaml text eol=lf
*.md text eol=lf

# –ë–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã (–±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏)
*.png binary
*.jpg binary
*.jpeg binary
*.gif binary
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

| –î–µ–π—Å—Ç–≤–∏–µ Git          | –ë–µ–∑ .gitattributes                      | –° .gitattributes (`eol=lf`)           |
|-----------------------|-----------------------------------------|---------------------------------------|
| –ö–æ–º–º–∏—Ç (Windows)      | –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å CRLF                 | Git –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç CRLF‚ÜíLF –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º |
| Checkout (Linux)      | –§–∞–π–ª –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Å CRLF (–ø—Ä–æ–±–ª–µ–º–∞!)     | –§–∞–π–ª –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Å LF (–≤—Å–µ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ) |

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤:**
```bash
# –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è .gitattributes
git add --renormalize .
git commit -m "Enforce LF line endings for shell scripts"
```

---

## üìö –ö–ª—é—á–µ–≤—ã–µ –£—Ä–æ–∫–∏

### 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º –Ω–∞ —Å—Ç—ã–∫–µ –û–°

**–ü—Ä–∏–Ω—Ü–∏–ø "–ì—Ä–∞–Ω–∏—Ü—ã":** –ö–æ–≥–¥–∞ –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –ª–æ–º–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≥—Ä–∞–Ω–∏—Ü—ã:
- ‚úÖ –°–µ—Ç–µ–≤–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ (`localhost` vs `db`)
- ‚úÖ –§–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤ (CRLF vs LF)
- ‚úÖ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (permissions)
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (ENV)

### 2. –ú–∏–Ω–∏–º–∞–ª–∏–∑–º –≤ Docker-–æ–±—Ä–∞–∑–∞—Ö

**KISS Principle:**
- ‚úÖ `sed` (–¥–æ—Å—Ç—É–ø–µ–Ω –≤–µ–∑–¥–µ, 0 –±–∞–π—Ç overhead) vs ‚ùå `dos2unix` (—Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏, —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –æ–±—Ä–∞–∑)
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–∑ –±–∞–∑–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ vs ‚ùå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã

### 3. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ Build-time –∏ Runtime

**Separation of Concerns:**

| –≠—Ç–∞–ø      | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å                                      | –ü—Ä–∏–º–µ—Ä                                  |
|-----------|------------------------------------------------------|-----------------------------------------|
| Build     | –ö–æ–º–ø–∏–ª—è—Ü–∏—è, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π                   | `pip install`, `COPY`, –∫–æ–º–ø–∏–ª—è—Ü–∏—è –∫–æ–¥–∞  |
| Runtime   | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º         | –ú–∏–≥—Ä–∞—Ü–∏–∏, —Å–±–æ—Ä —Å—Ç–∞—Ç–∏–∫–∏, –æ–∂–∏–¥–∞–Ω–∏–µ –ë–î     |

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (—Å–µ–∫—Ä–µ—Ç—ã –Ω–µ –∑–∞–ø–µ–∫–∞—é—Ç—Å—è –≤ –æ–±—Ä–∞–∑)
- –ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å (–æ–¥–∏–Ω –æ–±—Ä–∞–∑ –¥–ª—è dev/staging/prod)
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)

### 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤

**Worker vs Web:**

| –°–µ—Ä–≤–∏—Å | –†–æ–ª—å                           | –ú–∏–≥—Ä–∞—Ü–∏–∏ | –°–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–∏–∫–∏ | –°–µ—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø |
|--------|--------------------------------|----------|----------------|----------------|
| web    | –û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤        | ‚úÖ –î–∞    | ‚úÖ –î–∞          | ‚úÖ –ò–∑–≤–Ω–µ       |
| worker | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏     | ‚ùå –ù–µ—Ç   | ‚ùå –ù–µ—Ç         | ‚ùå –¢–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ |

**–ü–æ—á–µ–º—É worker –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏:**
- –ò–∑–±–µ–∂–∞–Ω–∏–µ race conditions (–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –º–µ–Ω—è—é—Ç —Å—Ö–µ–º—É –ë–î)
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–∫–∏ (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã)
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (–º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å N –≤–æ—Ä–∫–µ—Ä–æ–≤ –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)

### 5. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º

**Fast Failpoints:**

| –ö–æ–º–∞–Ω–¥–∞                   | –í—Ä–µ–º—è | –¶–µ–ª—å                                           |
|---------------------------|-------|------------------------------------------------|
| `docker compose config`   | <1—Å   | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ YAML                       |
| `docker compose build`    | ~2-5–º | –ü—Ä–æ–≤–µ—Ä–∫–∞ Dockerfile –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π     |
| `docker compose up -d`    | ~10—Å  | –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤                             |
| `docker compose logs`     | <1—Å   | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–º–∏–≥—Ä–∞—Ü–∏–∏, —Å—Ç–∞—Ç–∏–∫–∞) |

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –¥–æ–ª–≥–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏.

---


## üîó –°—Å—ã–ª–∫–∏ –∏ –†–µ—Å—É—Ä—Å—ã

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Docker Compose File Reference](https://docs.docker.com/compose/compose-file/)
- [Git Attributes Documentation](https://git-scm.com/docs/gitattributes)
- [Django Static Files Management](https://docs.djangoproject.com/en/stable/howto/static-files/)

### Best Practices
- [12-Factor App: Configuration](https://12factor.net/config)
- [Docker Best Practices](https://docs.docker.com/develop/dev-best-practices/)
- [Line Endings in Git](https://docs.github.com/en/get-started/getting-started-with-git/configuring-git-to-handle-line-endings)

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä —Ç–æ–≥–æ, –∫–∞–∫ –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è (Windows/Linux) –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å "–Ω–µ–≤–∏–¥–∏–º—ã–µ" –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª–æ–∂–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.

**–ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é line endings
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: —Ä–∞–∑–¥–µ–ª–µ–Ω—ã build-time –∏ runtime –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –ü–æ–≤—ã—à–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: —Å–µ–∫—Ä–µ—Ç—ã –Ω–µ –∑–∞–ø–µ–∫–∞—é—Ç—Å—è –≤ –æ–±—Ä–∞–∑
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ `.gitattributes`

**–ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å:**
–≠—Ç–∏ —Ä–µ—à–µ–Ω–∏—è –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–∏–º–µ–Ω–∏–º—ã –∫ –ª—é–±–æ–º—É –ø—Ä–æ–µ–∫—Ç—É, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–º—É Docker –∏ Git –≤ –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

---
